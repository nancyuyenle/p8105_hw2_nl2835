p8105_hw2_nl2835
================
Nancy Le
09-28-2023

``` r
library(tidyverse)
library(readxl)
```

### Problem 1:

We import and clean the FiveThirtyEight `pols_month_df` data, which
gives the number of national politicians who are democratic or
republican. Some values of `prez_gop` are `2` - we code them as `gop` in
the new `prez` variable.

``` r

month_df = 
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name
  )

pols_month_df = 
  read_csv(file = "./fivethirtyeight_datasets/pols-month.csv") |> 
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE) |> 
  mutate(
    prez = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) |>
  left_join(x = _, y = month_df) |> 
  select(year, month, everything(), -day, -starts_with("prez")) 
```

We import and clean the FiveThirtyEight `SNP_df` data, which gives the
monthly closing values of the S&P 500 by year.

``` r
SNP_df = 
  read_csv(file = "./fivethirtyeight_datasets/snp.csv") |> 
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) |> 
  mutate(month = month.name[month]) |> 
  arrange(year, month) |> 
  select(year, month, close)
```

We clean the `unemployment_df` data to merge with `pols_month_df` and
`SNP_df` datasets.

``` r
unemployment_df = 
  read_csv(file = "./fivethirtyeight_datasets/unemployment.csv") |> 
  rename(year = Year) |> 
  pivot_longer(
    Jan:Dec,
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(x = _,  y = month_df) |> 
  select(year, month, unemployment)
```

Merging 3 datasets

``` r
fivethirtyeight_data = 
  left_join(pols_month_df, SNP_df) |> 
  left_join(x = _, y = unemployment_df)


str(fivethirtyeight_data)
## tibble [822 × 12] (S3: tbl_df/tbl/data.frame)
##  $ year        : num [1:822] 1947 1947 1947 1947 1947 ...
##  $ month       : chr [1:822] "January" "February" "March" "April" ...
##  $ month_num   : int [1:822] 1 2 3 4 5 6 7 8 9 10 ...
##  $ gov_gop     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
##  $ sen_gop     : num [1:822] 51 51 51 51 51 51 51 51 51 51 ...
##  $ rep_gop     : num [1:822] 253 253 253 253 253 253 253 253 253 253 ...
##  $ gov_dem     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
##  $ sen_dem     : num [1:822] 45 45 45 45 45 45 45 45 45 45 ...
##  $ rep_dem     : num [1:822] 198 198 198 198 198 198 198 198 198 198 ...
##  $ month_abb   : chr [1:822] "Jan" "Feb" "Mar" "Apr" ...
##  $ close       : num [1:822] NA NA NA NA NA NA NA NA NA NA ...
##  $ unemployment: num [1:822] NA NA NA NA NA NA NA NA NA NA ...
```

\###Problem 2:

``` r
trashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 1,
        range = "A2:N549") |> 
  janitor::clean_names() |> 
  mutate(
    sheet = "mister trashwheel", homes_powered_v2 = (weight_tons * 500) / 
      30) |> 
  select(dumpster, year, month, everything(), -homes_powered)
```

``` r
proftrashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 2,
        range = "A2:M96") |> 
  janitor::clean_names()
  

proftrashwheel_df = proftrashwheel_df |> 
  mutate(
    homes_powered_v2 = (weight_tons * 500) / 30) |> 
  mutate(sheet = "professor trashwheel") |> 
  select(dumpster, year, month, everything(), -homes_powered)
```

Imported, cleaned, and organized Professor Trash Wheel data.

``` r
gwynnda_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 4,
        range = "A2:K108") |> 
  mutate(sheet = "gwynnda") |> 
  janitor::clean_names()

gwynnda_df = gwynnda_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(dumpster, year, month, everything(), -homes_powered)
```

Imported, cleaned, and organized Gwynnda data.

``` r
proftrashwheel_df <- proftrashwheel_df |>   
    mutate(year = as.numeric(year))


trashwheel_df <- trashwheel_df |>   
    mutate(year = as.numeric(year))
```

``` r
trashwheel_collection = 
  left_join(gwynnda_df, proftrashwheel_df) |>
  left_join(x = _, y = trashwheel_df)

str(trashwheel_collection)
## tibble [106 × 16] (S3: tbl_df/tbl/data.frame)
##  $ dumpster          : num [1:106] 1 2 3 4 5 6 7 8 9 10 ...
##  $ year              : num [1:106] 2021 2021 2021 2021 2021 ...
##  $ month             : chr [1:106] "July" "July" "July" "July" ...
##  $ date              : POSIXct[1:106], format: "2021-07-03" "2021-07-07" ...
##  $ weight_tons       : num [1:106] 0.93 2.26 1.62 1.76 1.53 2.06 1.9 2.16 2.6 3.21 ...
##  $ volume_cubic_yards: num [1:106] 15 15 15 15 15 15 15 15 15 15 ...
##  $ plastic_bottles   : num [1:106] 1200 2000 1800 1000 2100 2400 2700 3000 980 240 ...
##  $ polystyrene       : num [1:106] 360 240 270 180 240 360 320 320 180 42 ...
##  $ cigarette_butts   : num [1:106] 3400 3900 2900 2100 4000 3900 4200 4000 1800 400 ...
##  $ plastic_bags      : num [1:106] 1800 2200 2400 1800 2700 3000 3200 3600 1000 360 ...
##  $ sheet             : chr [1:106] "gwynnda" "gwynnda" "gwynnda" "gwynnda" ...
##  $ homes_powered_v2  : num [1:106] 15.5 37.7 27 29.3 25.5 ...
##  $ glass_bottles     : num [1:106] NA NA NA NA NA NA NA NA NA NA ...
##  $ grocery_bags      : num [1:106] NA NA NA NA NA NA NA NA NA NA ...
##  $ chip_bags         : num [1:106] NA NA NA NA NA NA NA NA NA NA ...
##  $ sports_balls      : num [1:106] NA NA NA NA NA NA NA NA NA NA ...
```

``` r
trashwheel_collection_data =  
     full_join(gwynnda_df, proftrashwheel_df, by = c("dumpster",
              "month", "year", "date", "weight_tons", "volume_cubic_yards", 
              "plastic_bottles", "polystyrene", "cigarette_butts",
              "homes_powered_v2", "sheet"))
```

``` r
trashwheel_collection_data_total = 
     full_join(trashwheel_collection_data, trashwheel_df, by = c("dumpster",
              "month", "year", "date", "weight_tons", "volume_cubic_yards", 
              "plastic_bottles", "polystyrene", "cigarette_butts", 
              "sheet", "glass_bottles", "grocery_bags", "homes_powered_v2",
              "chip_bags"))
```

This combined data set has `747` and
`r ncol(trashwheel_collection_data_total)` columns. The variables are:
dumpster \#, month, year, date, weight in tons, volume in cubic yards,
plastic bottles, polystyrene, cigarette butts, plastic bags, which sheet
the data is from, homes powered, glass bottles, grocery bags, chip bags,
and sports balls.

``` r
ptwtons = trashwheel_collection_data_total |> 
  filter(sheet=="professor trashwheel") |> 
  pull(weight_tons) |> 
  sum() 
```

The total weight of trash collected by Professor Trash Wheel was
`190.12` tons.

``` r
totalcigsgwyn = trashwheel_collection_data_total |> 
  filter(sheet=="gwynnda", year=="2021", month=="July") |> 
  pull(cigarette_butts) |> 
  sum() 
```

The total number of cigarette butts collected by Gwynnda in July of 2021
was `1.63\times 10^{4}`.

Problem \#3

``` r
baseline_df = 
  read_csv("./data_mci/mci_baseline.csv", skip = 1) |> 
  janitor::clean_names() 
```

``` r
baseline_df = baseline_df |> 
 mutate(
   sex = ifelse(sex == 1, "male", "female"),
   apoe4 = (apoe4 == "1"),
   )
```

``` r
new_baseline <- baseline_df |> 
  filter(age_at_onset != ".")
```

Important steps in the import process were to skip the first row of the
csv file so that there were not two rows of variable names. Names were
cleaned to be usable in R, and sex and APOE4 carrier status were changed
to a male/female character variable and a logical variable,
respectively.

There were `483` participants recruited, and of these, `97` developed
MCI.

The average baseline age for participants in the study is `65.6113402`.
The proportion of women in the study who are APOE4 carriers are
`0.628866`.

``` r
amyloid_df = 
  read_csv("./data_mci/mci_amyloid.csv") |> 
  janitor::clean_names() 
```
