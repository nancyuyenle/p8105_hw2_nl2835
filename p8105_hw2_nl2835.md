p8105_hw2_nl2835
================
Nancy Le
09-28-2023

Problem 1:

Import FiveThirtyEight data

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
pols_month_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month_df = separate(pols_month_df, col = mon, into = 
         c("Year", "Month", "Day"), sep = "-") 
```

Review column names in pols month df, and separate date variable into
month, year, and day.

``` r
pols_month_df[["Month"]] <-
  as.numeric(pols_month_df[["Month"]])
```

``` r
pols_month_df = pols_month_df |> 
  mutate(Month = month.abb[Month])
```

Changed “Month” variable to text.

``` r
pols_month_df = pols_month_df |> 
  mutate(prez = ifelse(prez_gop=="1", "gop", "dem")) |> 
  select(-prez_gop, -prez_dem, -Day)  
```

Created “prez” variable for presidential party.

``` r
select(pols_month_df, Year, Month, everything())
```

    ## # A tibble: 822 × 9
    ##    Year  Month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem prez 
    ##    <chr> <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>
    ##  1 1947  Jan        23      51     253      23      45     198 dem  
    ##  2 1947  Feb        23      51     253      23      45     198 dem  
    ##  3 1947  Mar        23      51     253      23      45     198 dem  
    ##  4 1947  Apr        23      51     253      23      45     198 dem  
    ##  5 1947  May        23      51     253      23      45     198 dem  
    ##  6 1947  Jun        23      51     253      23      45     198 dem  
    ##  7 1947  Jul        23      51     253      23      45     198 dem  
    ##  8 1947  Aug        23      51     253      23      45     198 dem  
    ##  9 1947  Sep        23      51     253      23      45     198 dem  
    ## 10 1947  Oct        23      51     253      23      45     198 dem  
    ## # ℹ 812 more rows

Reorganized dataset to have year and month as leading columns.

``` r
SNP_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/snp.csv") |> 
  separate(col = date, into = 
         c("Month", "Day", "Year"), sep = "/") 
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
  SNP_df[["Month"]] <-
      as.numeric(SNP_df[["Month"]])
```

``` r
SNP_df = SNP_df |> 
  mutate(Month = month.abb[Month])
```

``` r
SNP_df |> 
  mutate(Year = sprintf('20%s', Year)) |> 
  select(Year, Month, everything())
```

    ## # A tibble: 787 × 4
    ##    Year  Month Day   close
    ##    <chr> <chr> <chr> <dbl>
    ##  1 2015  Jul   1     2080.
    ##  2 2015  Jun   1     2063.
    ##  3 2015  May   1     2107.
    ##  4 2015  Apr   1     2086.
    ##  5 2015  Mar   2     2068.
    ##  6 2015  Feb   2     2104.
    ##  7 2015  Jan   2     1995.
    ##  8 2014  Dec   1     2059.
    ##  9 2014  Nov   3     2068.
    ## 10 2014  Oct   1     2018.
    ## # ℹ 777 more rows

``` r
unemployment_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/unemployment.csv") 
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_data =
  pivot_longer(
    unemployment_df,
    Jan:Dec,
    names_to = "Month",
    values_to = "Unemployment Rate"
  )
```

``` r
fivethirtyeight_data = 
  full_join(SNP_df, pols_month_df, by = c("Year", 
            "Month"))
```

``` r
fivethirtyeight_data[["Year"]] <-
  as.numeric(fivethirtyeight_data[["Year"]])
```

``` r
full_fivethirtyeight_data = 
  full_join(fivethirtyeight_data, unemployment_data, by =
          c("Year", "Month"))
```

The unemployment dataset described monthly unemployment rate by year,
the SNP dataset described monthly closing values of the S&P 500 by year,
and the pols dataset described the count of elected officials by
political party, by month and year. The full FiveThirtyEight dataset has
1,428 rows by 12 columns. The years range from 1947 to 2015. The key
variables are Year, Month, Day, close (for closing value), GOP & Dem
governors, GOP & Dem senators, GOP & Dem representatives, and president
party affiliation.

Problem 2:

``` r
trashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 1,
        range = "A2:N549") |> 
  mutate(sheet = "mister trashwheel") |> 
  janitor::clean_names()
```

``` r
trashwheel_df = trashwheel_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```

``` r
trashwheel_df |> 
  select(dumpster, year, month, everything())
```

    ## # A tibble: 547 × 15
    ##    dumpster year  month date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <chr> <dttm>                    <dbl>              <dbl>
    ##  1        1 2014  May   2014-05-16 00:00:00        4.31                 18
    ##  2        2 2014  May   2014-05-16 00:00:00        2.74                 13
    ##  3        3 2014  May   2014-05-16 00:00:00        3.45                 15
    ##  4        4 2014  May   2014-05-17 00:00:00        3.1                  15
    ##  5        5 2014  May   2014-05-17 00:00:00        4.06                 18
    ##  6        6 2014  May   2014-05-20 00:00:00        2.71                 13
    ##  7        7 2014  May   2014-05-21 00:00:00        1.91                  8
    ##  8        8 2014  May   2014-05-28 00:00:00        3.7                  16
    ##  9        9 2014  June  2014-06-05 00:00:00        2.52                 14
    ## 10       10 2014  June  2014-06-11 00:00:00        3.76                 18
    ## # ℹ 537 more rows
    ## # ℹ 9 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, grocery_bags <dbl>,
    ## #   chip_bags <dbl>, sports_balls <dbl>, sheet <chr>, homes_powered_v2 <dbl>

``` r
trashwheel_df[["year"]] <-
  as.numeric(trashwheel_df[["year"]])
```

``` r
proftrashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 2,
        range = "A2:M96") |> 
  mutate(sheet = "professor trashwheel") |> 
  janitor::clean_names()
```

``` r
proftrashwheel_df = proftrashwheel_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```

Imported, cleaned, and organized Professor Trash Wheel data.

``` r
gwynnda_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 4,
        range = "A2:K108") |> 
  mutate(sheet = "gwynnda") |> 
  janitor::clean_names()
```

``` r
gwynnda_df = gwynnda_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```

Imported, cleaned, and organized Gwynnda data.

``` r
trashwheel_collection_data =  
     full_join(gwynnda_df, proftrashwheel_df, by = c("dumpster",
              "month", "year", "date", "weight_tons", "volume_cubic_yards", 
              "plastic_bottles", "polystyrene", "cigarette_butts",
              "homes_powered_v2", "sheet"))
```

``` r
trashwheel_collection_data_total = 
     full_join(trashwheel_collection_data, trashwheel_df, by = c("dumpster",
              "month", "year", "date", "weight_tons", "volume_cubic_yards", 
              "plastic_bottles", "polystyrene", "cigarette_butts", 
              "sheet", "glass_bottles", "grocery_bags", "homes_powered_v2",
              "chip_bags"))
```

This combined data set has `747` and
`r ncol(trashwheel_collection_data_total)` columns. The variables are:
dumpster \#, month, year, date, weight in tons, volume in cubic yards,
plastic bottles, polystyrene, cigarette butts, plastic bags, which sheet
the data is from, homes powered, glass bottles, grocery bags, chip bags,
and sports balls.

``` r
ptwtons = trashwheel_collection_data_total |> 
  filter(sheet=="professor trashwheel") |> 
  pull(weight_tons) |> 
  sum() 
```

The total weight of trash collected by Professor Trash Wheel was
`190.12` tons.

``` r
totalcigsgwyn = trashwheel_collection_data_total |> 
  filter(sheet=="gwynnda", year=="2021", month=="July") |> 
  pull(cigarette_butts) |> 
  sum() 
```

The total number of cigarette butts collected by Gwynnda in July of 2021
was `1.63\times 10^{4}`.
