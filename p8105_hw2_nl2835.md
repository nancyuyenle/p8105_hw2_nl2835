p8105_hw2_nl2835
================
Nancy Le
09-28-2023

Problem 1:

Import FiveThirtyEight data

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
pols_month_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month_df = separate(pols_month_df, col = mon, into = 
         c("Year", "Month", "Day"), sep = "-") 
```

Review column names in pols month df, and separate date variable into
month, year, and day.

``` r
pols_month_df[["Month"]] <-
  as.numeric(pols_month_df[["Month"]])
```

``` r
pols_month_df = pols_month_df |> 
  mutate(Month = month.abb[Month])
```

Changed “Month” variable to text.

``` r
pols_month_df = pols_month_df |> 
  mutate(prez = ifelse(prez_gop=="1", "gop", "dem")) |> 
  select(-prez_gop, -prez_dem, -Day)  
```

Created “prez” variable for presidential party.

``` r
select(pols_month_df, Year, Month, everything())
```

    ## # A tibble: 822 × 9
    ##    Year  Month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem prez 
    ##    <chr> <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>
    ##  1 1947  Jan        23      51     253      23      45     198 dem  
    ##  2 1947  Feb        23      51     253      23      45     198 dem  
    ##  3 1947  Mar        23      51     253      23      45     198 dem  
    ##  4 1947  Apr        23      51     253      23      45     198 dem  
    ##  5 1947  May        23      51     253      23      45     198 dem  
    ##  6 1947  Jun        23      51     253      23      45     198 dem  
    ##  7 1947  Jul        23      51     253      23      45     198 dem  
    ##  8 1947  Aug        23      51     253      23      45     198 dem  
    ##  9 1947  Sep        23      51     253      23      45     198 dem  
    ## 10 1947  Oct        23      51     253      23      45     198 dem  
    ## # ℹ 812 more rows

Reorganized dataset to have year and month as leading columns.

``` r
SNP_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/snp.csv") |> 
  separate(col = date, into = 
         c("Month", "Day", "Year"), sep = "/") 
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
SNP_df[["Month"]] <-
      as.numeric(SNP_df[["Month"]])
```

``` r
SNP_df = SNP_df |> 
  mutate(Month = month.abb[Month])
```

``` r
SNP_df = SNP_df |> 
  mutate(Year = sprintf('20%s', Year)) |> 
  select(Year, Month, everything())
```

``` r
unemployment_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/unemployment.csv") 
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_data =
  pivot_longer(
    unemployment_df,
    Jan:Dec,
    names_to = "Month",
    values_to = "Unemployment Rate"
  )
```

``` r
fivethirtyeight_data = 
  full_join(SNP_df, pols_month_df, by = c("Year", 
            "Month"))
```

``` r
fivethirtyeight_data[["Year"]] <-
  as.numeric(fivethirtyeight_data[["Year"]])
```

``` r
full_fivethirtyeight_data = 
  full_join(fivethirtyeight_data, unemployment_data, by =
          c("Year", "Month"))
```

The unemployment dataset described monthly unemployment rate by year,
the SNP dataset described monthly closing values of the S&P 500 by year,
and the pols dataset described the count of elected officials by
political party, by month and year. The full FiveThirtyEight dataset has
1,428 rows by 12 columns. The years range from 1947 to 2015. The key
variables are Year, Month, Day, close (for closing value), GOP & Dem
governors, GOP & Dem senators, GOP & Dem representatives, and president
party affiliation.

Problem 2:

``` r
trashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 1,
        range = "A2:N549") |> 
  mutate(sheet = "mister trashwheel") |> 
  janitor::clean_names()
```

``` r
trashwheel_df |> 
  mutate(homes_powered = (weight_tons * 500) / 30)
```

    ## # A tibble: 547 × 15
    ##    dumpster month year  date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <chr> <dttm>                    <dbl>              <dbl>
    ##  1        1 May   2014  2014-05-16 00:00:00        4.31                 18
    ##  2        2 May   2014  2014-05-16 00:00:00        2.74                 13
    ##  3        3 May   2014  2014-05-16 00:00:00        3.45                 15
    ##  4        4 May   2014  2014-05-17 00:00:00        3.1                  15
    ##  5        5 May   2014  2014-05-17 00:00:00        4.06                 18
    ##  6        6 May   2014  2014-05-20 00:00:00        2.71                 13
    ##  7        7 May   2014  2014-05-21 00:00:00        1.91                  8
    ##  8        8 May   2014  2014-05-28 00:00:00        3.7                  16
    ##  9        9 June  2014  2014-06-05 00:00:00        2.52                 14
    ## 10       10 June  2014  2014-06-11 00:00:00        3.76                 18
    ## # ℹ 537 more rows
    ## # ℹ 9 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, grocery_bags <dbl>,
    ## #   chip_bags <dbl>, sports_balls <dbl>, homes_powered <dbl>, sheet <chr>

SNP_df = SNP_df \|\> mutate(Year = sprintf(‘20%s’, Year)) \|\>
select(Year, Month, everything())
