p8105_hw2_nl2835
================
Nancy Le
09-28-2023

``` r
library(tidyverse)
library(readxl)
```

### Problem 1:

We import and clean the FiveThirtyEight `pols_month_df` data, which
gives the number of national politicians who are democratic or
republican. Some values of `prez_gop` are `2` - we code them as `gop` in
the new `prez` variable.

``` r

month_df = 
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name
  )

pols_month_df = 
  read_csv(file = "./fivethirtyeight_datasets/pols-month.csv") |> 
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE) |> 
  mutate(
    prez = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) |>
  left_join(x = _, y = month_df) |> 
  select(year, month, everything(), -day, -starts_with("prez")) 
```

We import and clean the FiveThirtyEight `SNP_df` data, which gives the
monthly closing values of the S&P 500 by year.

``` r
SNP_df = 
  read_csv(file = "./fivethirtyeight_datasets/snp.csv") |> 
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) |> 
  mutate(month = month.name[month]) |> 
  arrange(year, month) |> 
  select(year, month, close)
```

We clean the `unemployment_df` data to merge with `pols_month_df` and
`SNP_df` datasets.

``` r
unemployment_df = 
  read_csv(file = "./fivethirtyeight_datasets/unemployment.csv") |> 
  rename(year = Year) |> 
  pivot_longer(
    Jan:Dec,
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(x = _,  y = month_df) |> 
  select(year, month, unemployment)
```

Merging 3 datasets

``` r
fivethirtyeight_data = 
  left_join(pols_month_df, SNP_df) |> 
  left_join(x = _, y = unemployment_df)


str(fivethirtyeight_data)
## tibble [822 × 12] (S3: tbl_df/tbl/data.frame)
##  $ year        : num [1:822] 1947 1947 1947 1947 1947 ...
##  $ month       : chr [1:822] "January" "February" "March" "April" ...
##  $ month_num   : int [1:822] 1 2 3 4 5 6 7 8 9 10 ...
##  $ gov_gop     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
##  $ sen_gop     : num [1:822] 51 51 51 51 51 51 51 51 51 51 ...
##  $ rep_gop     : num [1:822] 253 253 253 253 253 253 253 253 253 253 ...
##  $ gov_dem     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
##  $ sen_dem     : num [1:822] 45 45 45 45 45 45 45 45 45 45 ...
##  $ rep_dem     : num [1:822] 198 198 198 198 198 198 198 198 198 198 ...
##  $ month_abb   : chr [1:822] "Jan" "Feb" "Mar" "Apr" ...
##  $ close       : num [1:822] NA NA NA NA NA NA NA NA NA NA ...
##  $ unemployment: num [1:822] NA NA NA NA NA NA NA NA NA NA ...
```

Problem 2:

``` r
trashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 1,
        range = "A2:N549") |> 
  mutate(sheet = "mister trashwheel") |> 
  janitor::clean_names()
```

``` r
trashwheel_df = trashwheel_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```

``` r
trashwheel_df |> 
  select(dumpster, year, month, everything())
## # A tibble: 547 × 15
##    dumpster year  month date                weight_tons volume_cubic_yards
##       <dbl> <chr> <chr> <dttm>                    <dbl>              <dbl>
##  1        1 2014  May   2014-05-16 00:00:00        4.31                 18
##  2        2 2014  May   2014-05-16 00:00:00        2.74                 13
##  3        3 2014  May   2014-05-16 00:00:00        3.45                 15
##  4        4 2014  May   2014-05-17 00:00:00        3.1                  15
##  5        5 2014  May   2014-05-17 00:00:00        4.06                 18
##  6        6 2014  May   2014-05-20 00:00:00        2.71                 13
##  7        7 2014  May   2014-05-21 00:00:00        1.91                  8
##  8        8 2014  May   2014-05-28 00:00:00        3.7                  16
##  9        9 2014  June  2014-06-05 00:00:00        2.52                 14
## 10       10 2014  June  2014-06-11 00:00:00        3.76                 18
## # ℹ 537 more rows
## # ℹ 9 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
## #   cigarette_butts <dbl>, glass_bottles <dbl>, grocery_bags <dbl>,
## #   chip_bags <dbl>, sports_balls <dbl>, sheet <chr>, homes_powered_v2 <dbl>
```

``` r
trashwheel_df[["year"]] <-
  as.numeric(trashwheel_df[["year"]])
```

``` r
proftrashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 2,
        range = "A2:M96") |> 
  mutate(sheet = "professor trashwheel") |> 
  janitor::clean_names()
```

``` r
proftrashwheel_df = proftrashwheel_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```

Imported, cleaned, and organized Professor Trash Wheel data.

``` r
gwynnda_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 4,
        range = "A2:K108") |> 
  mutate(sheet = "gwynnda") |> 
  janitor::clean_names()
```

``` r
gwynnda_df = gwynnda_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```

Imported, cleaned, and organized Gwynnda data.

``` r
trashwheel_collection_data =  
     full_join(gwynnda_df, proftrashwheel_df, by = c("dumpster",
              "month", "year", "date", "weight_tons", "volume_cubic_yards", 
              "plastic_bottles", "polystyrene", "cigarette_butts",
              "homes_powered_v2", "sheet"))
```

``` r
trashwheel_collection_data_total = 
     full_join(trashwheel_collection_data, trashwheel_df, by = c("dumpster",
              "month", "year", "date", "weight_tons", "volume_cubic_yards", 
              "plastic_bottles", "polystyrene", "cigarette_butts", 
              "sheet", "glass_bottles", "grocery_bags", "homes_powered_v2",
              "chip_bags"))
```

This combined data set has `747` and
`r ncol(trashwheel_collection_data_total)` columns. The variables are:
dumpster \#, month, year, date, weight in tons, volume in cubic yards,
plastic bottles, polystyrene, cigarette butts, plastic bags, which sheet
the data is from, homes powered, glass bottles, grocery bags, chip bags,
and sports balls.

``` r
ptwtons = trashwheel_collection_data_total |> 
  filter(sheet=="professor trashwheel") |> 
  pull(weight_tons) |> 
  sum() 
```

The total weight of trash collected by Professor Trash Wheel was
`190.12` tons.

``` r
totalcigsgwyn = trashwheel_collection_data_total |> 
  filter(sheet=="gwynnda", year=="2021", month=="July") |> 
  pull(cigarette_butts) |> 
  sum() 
```

The total number of cigarette butts collected by Gwynnda in July of 2021
was `1.63\times 10^{4}`.

Problem \#3
