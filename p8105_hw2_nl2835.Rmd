---
title: "p8105_hw2_nl2835"
author: "Nancy Le"
date: 09-28-2023
output: github_document
---

Problem 1: 

Import FiveThirtyEight data

```{r}
library(tidyverse)

pols_month_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/pols-month.csv")

```

```{r}
pols_month_df = separate(pols_month_df, col = mon, into = 
         c("Year", "Month", "Day"), sep = "-") 

```

Review column names in pols month df, and separate date variable into month, year, and day. 

```{r}
pols_month_df[["Month"]] <-
  as.numeric(pols_month_df[["Month"]])

```

```{r}
pols_month_df = pols_month_df |> 
  mutate(Month = month.abb[Month])
```

Changed "Month" variable to text.

```{r}
pols_month_df = pols_month_df |> 
  mutate(prez = ifelse(prez_gop=="1", "gop", "dem")) |> 
  select(-prez_gop, -prez_dem, -Day)  
```

Created "prez" variable for presidential party.

```{r}
select(pols_month_df, Year, Month, everything())
```

Reorganized dataset to have year and month as leading columns.

```{r}
SNP_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/snp.csv") |> 
  separate(col = date, into = 
         c("Month", "Day", "Year"), sep = "/") 
```


```{r}
  SNP_df[["Month"]] <-
      as.numeric(SNP_df[["Month"]])

```

```{r}
SNP_df = SNP_df |> 
  mutate(Month = month.abb[Month])
```

```{r}
SNP_df |> 
  mutate(Year = sprintf('20%s', Year)) |> 
  select(Year, Month, everything())
```

```{r}
unemployment_df = 
  read_csv(file = 
      "./fivethirtyeight_datasets/unemployment.csv") 
```


```{r}
unemployment_data =
  pivot_longer(
    unemployment_df,
    Jan:Dec,
    names_to = "Month",
    values_to = "Unemployment Rate"
  )
```

```{r}
fivethirtyeight_data = 
  full_join(SNP_df, pols_month_df, by = c("Year", 
            "Month"))
  
```

```{r}
fivethirtyeight_data[["Year"]] <-
  as.numeric(fivethirtyeight_data[["Year"]])

```


```{r}
full_fivethirtyeight_data = 
  full_join(fivethirtyeight_data, unemployment_data, by =
          c("Year", "Month"))
```

The unemployment dataset described monthly unemployment rate by year, the SNP dataset described monthly closing values of the S&P 500 by year, and the pols dataset described the count of elected officials by political party, by month and year. The full FiveThirtyEight dataset has 1,428 rows by 12 columns. The years range from 1947 to 2015. The key variables are Year, Month, Day, close (for closing value), GOP & Dem governors, GOP & Dem senators, GOP & Dem representatives, and president party affiliation.


Problem 2:

```{r}
trashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 1,
        range = "A2:N549") |> 
  mutate(sheet = "mister trashwheel") |> 
  janitor::clean_names()
```


```{r}
trashwheel_df = trashwheel_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```


```{r}
trashwheel_df |> 
  select(dumpster, year, month, everything())
```

```{r}
trashwheel_df[["year"]] <-
  as.numeric(trashwheel_df[["year"]])

```


```{r}
proftrashwheel_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 2,
        range = "A2:M96") |> 
  mutate(sheet = "professor trashwheel") |> 
  janitor::clean_names()
```

```{r}
proftrashwheel_df = proftrashwheel_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```

Imported, cleaned, and organized Professor Trash Wheel data.

```{r}
gwynnda_df = 
  readxl::read_excel("./mr_trashwheel/trashwheel_collection.xlsx", 4,
        range = "A2:K108") |> 
  mutate(sheet = "gwynnda") |> 
  janitor::clean_names()
```

```{r}
gwynnda_df = gwynnda_df |> 
  mutate(homes_powered_v2 = (weight_tons * 500) / 30) |> 
  select(-homes_powered)
```

Imported, cleaned, and organized Gwynnda data.



```{r}
trashwheel_collection_data =  
     full_join(gwynnda_df, proftrashwheel_df, by = c("dumpster",
              "month", "year", "date", "weight_tons", "volume_cubic_yards", 
              "plastic_bottles", "polystyrene", "cigarette_butts",
              "homes_powered_v2", "sheet"))

```



```{r}
trashwheel_collection_data_total = 
     full_join(trashwheel_collection_data, trashwheel_df, by = c("dumpster",
              "month", "year", "date", "weight_tons", "volume_cubic_yards", 
              "plastic_bottles", "polystyrene", "cigarette_butts", 
              "sheet", "glass_bottles", "grocery_bags", "homes_powered_v2",
              "chip_bags"))

```


This combined data set has ```r nrow(trashwheel_collection_data_total)``` and
```r ncol(trashwheel_collection_data_total)``` columns. The variables are: dumpster #, month, year, date, weight in tons, volume in cubic yards, plastic bottles, polystyrene, cigarette butts, plastic bags, which sheet the data is from, homes powered, glass bottles, grocery bags, chip bags, and sports balls. 

```{r}
ptwtons = trashwheel_collection_data_total |> 
  filter(sheet=="professor trashwheel") |> 
  pull(weight_tons) |> 
  sum() 

```


The total weight of trash collected by Professor Trash Wheel was ```r ptwtons``` tons.


```{r}
totalcigsgwyn = trashwheel_collection_data_total |> 
  filter(sheet=="gwynnda", year=="2021", month=="July") |> 
  pull(cigarette_butts) |> 
  sum() 
```


The total number of cigarette butts collected by Gwynnda in July of 2021 was ```r totalcigsgwyn```.




